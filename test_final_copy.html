<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ Ú©Ù¾ÛŒ</title>
    <style>
        body { font-family: Tahoma; direction: rtl; padding: 20px; }
        .test-section { margin: 20px; padding: 15px; border: 2px solid #007cba; border-radius: 5px; }
        .copy-btn { background: #007cba; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 5px; }
        .copy-btn:hover { background: #005a87; }
        #irr-amount, #card-number { font-weight: bold; color: #333; }
    </style>
</head>
<body>

<h1>ğŸ§ª ØªØ³Øª Ù†Ù‡Ø§ÛŒÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ù¾ÛŒ - Ú©Ø§Ø±Øª Ø¨Ù‡ Ú©Ø§Ø±Øª</h1>

<div class="test-section">
    <h3>Ù…Ø¨Ù„Øº Ù‚Ø§Ø¨Ù„ Ù¾Ø±Ø¯Ø§Ø®Øª:</h3>
    <div>
        <span id="irr-amount">6,323,000</span>
        <span>ØªÙˆÙ…Ø§Ù†</span>
        <br>
        Ù…Ø¹Ø§Ø¯Ù„ $54
    </div>
    <button class="copy-btn" onclick="copyAmount()" type="button">
        Ú©Ù¾ÛŒ Ù…Ø¨Ù„Øº
    </button>
</div>

<div class="test-section">
    <h3>Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª:</h3>
    <div>
        <span id="card-number">6274-1219-8765-4321</span>
    </div>
    <button class="copy-btn" onclick="copyCard()" type="button">
        Ú©Ù¾ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª
    </button>
</div>

<div class="test-section">
    <h3>ğŸ“‹ Ù†ØªØ§ÛŒØ¬ ØªØ³Øª:</h3>
    <ul>
        <li>âœ… Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ "Ú©Ù¾ÛŒ Ù…Ø¨Ù„Øº" Ø¨Ø§ÛŒØ¯ Ø¹Ø¯Ø¯ 6323000 Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†Ø¯</li>
        <li>âœ… Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ "Ú©Ù¾ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª" Ø¨Ø§ÛŒØ¯ Ø¹Ø¯Ø¯ 62741219876554321 Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ù†Ø¯</li>
        <li>âœ… Ù‡Ø± Ú©Ø¯Ø§Ù… Ø¨Ø§ÛŒØ¯ Ù¾ÛŒØºØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª Ù†Ø´Ø§Ù† Ø¯Ù‡Ù†Ø¯</li>
    </ul>
</div>

<script>
// ØªÙˆØ§Ø¨Ø¹ Ø³Ø§Ø¯Ù‡ Ùˆ Ù…Ø·Ù…Ø¦Ù† Ø¨Ø±Ø§ÛŒ Ú©Ù¾ÛŒ - Ù‡Ù…Ø§Ù† Ú©Ø¯ÛŒ Ú©Ù‡ Ø¯Ø± checkout.html Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡
function copyAmount() {
  try {
    // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¹Ù†ØµØ± Ù…Ø¨Ù„Øº
    var amountEl = document.getElementById('irr-amount');
    if (!amountEl) {
      alert('âŒ Ø¹Ù†ØµØ± Ù…Ø¨Ù„Øº ÛŒØ§ÙØª Ù†Ø´Ø¯');
      return;
    }
    
    // Ú¯Ø±ÙØªÙ† Ù…ØªÙ†
    var text = amountEl.textContent || amountEl.innerText || '';
    if (!text) {
      alert('âŒ Ù…Ø¨Ù„Øº Ø®Ø§Ù„ÛŒ Ø§Ø³Øª');
      return;
    }
    
    // Ø­Ø°Ù Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø¨Ù‡ Ø¬Ø² Ø§Ø¹Ø¯Ø§Ø¯
    var numbers = text.replace(/[^0-9]/g, '');
    if (!numbers) {
      alert('âŒ Ù…Ø¨Ù„Øº Ù†Ø§Ù…Ø¹ØªØ¨Ø±');
      return;
    }
    
    // Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù†
    if (navigator.clipboard) {
      navigator.clipboard.writeText(numbers).then(function() {
        alert('âœ… Ù…Ø¨Ù„Øº Ú©Ù¾ÛŒ Ø´Ø¯: ' + numbers + ' ØªÙˆÙ…Ø§Ù†');
      }).catch(function() {
        copyToClipboardFallback(numbers);
      });
    } else {
      copyToClipboardFallback(numbers);
    }
    
  } catch (e) {
    alert('âŒ Ø®Ø·Ø§: ' + e.message);
  }
}

function copyCard() {
  try {
    // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¹Ù†ØµØ± Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª
    var cardEl = document.getElementById('card-number');
    if (!cardEl) {
      alert('âŒ Ø¹Ù†ØµØ± Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª ÛŒØ§ÙØª Ù†Ø´Ø¯');
      return;
    }
    
    // Ú¯Ø±ÙØªÙ† Ù…ØªÙ†
    var text = cardEl.textContent || cardEl.innerText || '';
    if (!text) {
      alert('âŒ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª Ø®Ø§Ù„ÛŒ Ø§Ø³Øª');
      return;
    }
    
    // Ø­Ø°Ù ÙØ§ØµÙ„Ù‡ Ùˆ Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ
    var cardNumber = text.replace(/[^0-9]/g, '');
    if (!cardNumber || cardNumber.length < 16) {
      alert('âŒ Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±');
      return;
    }
    
    // Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù†
    if (navigator.clipboard) {
      navigator.clipboard.writeText(cardNumber).then(function() {
        alert('âœ… Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª Ú©Ù¾ÛŒ Ø´Ø¯: ' + cardNumber);
      }).catch(function() {
        copyToClipboardFallback(cardNumber);
      });
    } else {
      copyToClipboardFallback(cardNumber);
    }
    
  } catch (e) {
    alert('âŒ Ø®Ø·Ø§: ' + e.message);
  }
}

// Ø±ÙˆØ´ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±Ù‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ
function copyToClipboardFallback(text) {
  try {
    var textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.left = '-999999px';
    textArea.style.top = '-999999px';
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    
    var successful = document.execCommand('copy');
    document.body.removeChild(textArea);
    
    if (successful) {
      alert('âœ… Ú©Ù¾ÛŒ Ø´Ø¯: ' + text);
    } else {
      alert('âŒ Ú©Ù¾ÛŒ Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ø¯Ø³ØªÛŒ Ú©Ù¾ÛŒ Ú©Ù†ÛŒØ¯: ' + text);
    }
  } catch (e) {
    alert('âŒ Ø®Ø·Ø§ Ø¯Ø± Ú©Ù¾ÛŒ: ' + text);
  }
}

// ØªØ³Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØµÙØ­Ù‡
window.onload = function() {
    console.log('ğŸ”§ Testing copy functions...');
    console.log('IRR Amount element:', document.getElementById('irr-amount'));
    console.log('Card Number element:', document.getElementById('card-number'));
    console.log('Copy functions loaded:', typeof copyAmount === 'function', typeof copyCard === 'function');
}
</script>

</body>
</html>